function newCountValue(a,b){var c=parseInt(a)+b;return isNaN(c)?b>0?b:0:(0>c&&(c=0),c)}var ui={};ui.initElems=[],ui.init=function(){var a;for(a=0;a<this.initElems.length;a++)this[this.initElems[a]]()},$(function(){ui.init()}),ui.compare=function(){var a=$(".compare-list td:first-child"),b=$(".compare__titles");if(titleList=$("td",b),compare=$(".compare"),frame=$(".compare__frame"),list=$(".compare-list"),prev=compare.find(".compare__prev"),next=compare.find(".compare__next"),compare.size()&&($(window).load(function(){a.each(function(b){titleList.eq(b).height(a.eq(b).height())}),b.addClass("ready")}),"Sly"in window)){var c=new Sly(frame,{horizontal:1,speed:300,touchDragging:1},{load:function(){list.width()>frame.width()?prev.add(next).show():prev.add(next).hide()}}).init();$(window).resize(function(){c.reload()}),prev.click(function(a){c.slideBy(-253),a.preventDefault()}),next.click(function(a){c.slideBy(253),a.preventDefault()})}$(document).on("click",".compare-list__remove-btn",function(a){var b=$(this).closest("td").index()+1;list.find("td:nth-child("+b+")").remove(),c.reload(),a.preventDefault()})},ui.initElems.push("compare"),ui.menuExpand=function(){$(".menu").on("click",".menu__expander",function(){$(this).closest(".menu__title").toggleClass("active")})},ui.initElems.push("menuExpand"),ui.miniCart=function(){var a=$(".mini-cart");a.on("click",".mini-cart__opener",function(){a.toggleClass("mini-cart_active")}),a.on("click",".mini-cart__delete",function(){$(this).closest(".mini-cart__list-item").remove()}),$(document).on("click",function(b){$(b.target).closest(".mini-cart").size()||a.removeClass("mini-cart_active")})},ui.initElems.push("miniCart"),ui.initShortMenu=function(){var a=$("#short-menu"),b=220,c=$(document.body);a.size()&&$(window).scroll(function(){var a=$(this);a.scrollTop()>=b?c.addClass("short-menu_active"):c.removeClass("short-menu_active")})},ui.initElems.push("initShortMenu"),ui.slider=function(){var a=$(".promo-slider");a.each(function(){{var a=$(".promo-slider__item",this),b=$(".promo-slider__switch-item");$(".promo-slider__progress").hide()}b.on("click",function(c){var d=$(this);a.removeClass("promo-slider__item_active").eq(d.index()).addClass("promo-slider__item_active"),b.removeClass("promo-slider__switch-item_active"),d.addClass("promo-slider__switch-item_active"),c.preventDefault()})})},ui.initElems.push("slider"),ui.filterSelects=function(){function a(a){var b,c,d=$(this);switch(d.addClass("filter-select_active"),"Sly"in window&&(c=d.find(".filter-select__drop-frame"),b=new Sly(c,{scrollBy:45,scrollBar:$("<div class='filter-select__scroll'><div class='filter-select__scroll-btn'></div></div>").appendTo(c),dragHandle:1,minHandleSize:20,dynamicHandle:1,clickBar:0,syncSpeed:.5},{load:function(){c.height()>=c.children().outerHeight(!0)?c.addClass("scroll_disabled"):c.removeClass("scroll_disabled")}}).init()),a){case"search":!function(){var a=[],c=d.find(".filter-select__list"),e="";d.find(".filter-select__list-item").each(function(){var b=$(this);a.push({text:b.text(),value:b.attr("data-value")})}),d.on("oninput"in window?"input":"keyup",".filter-select__search-input",function(){var d,f=this.value.toLowerCase().trimLeft(),g=0,h="";for(f?$(this).parent().addClass("filter-select__input-wrap_active"):$(this).parent().removeClass("filter-select__input-wrap_active");g<a.length;g++)d=a[g].text.toLowerCase().indexOf(f),d>=0&&(h+="<li data-value='"+a[g].value+"' class='filter-select__list-item"+(a[g].value==e?" filter-select__list-item_active":"")+"'>"+a[g].text.substr(0,d)+"<b>"+a[g].text.substr(d,f.length)+"</b>"+a[g].text.slice(d+f.length)+"</li>");c.html(h),b.reload()}).on("click",".filter-select__list-item",function(a){var b=$(this);b.addClass("filter-select__list-item_active").siblings().removeClass("filter-select__list-item_active"),e=b.attr("data-value"),d.trigger({type:"change:filterSelect",value:e,text:b.text(),closeSelect:!0}),a.preventDefault()}).on("keydown:filterSelect",function(a){var c=d.find(".filter-select__list-item_hover"),e=d.find(".filter-select__list-item_active");switch(a.keyCode){case 38:c.size()?c.prev().size()&&(c=c.removeClass("filter-select__list-item_hover").prev().addClass("filter-select__list-item_hover")):c=e.size()?e.prev().size()?e.prev().addClass("filter-select__list-item_hover"):e.addClass("filter-select__list-item_hover"):d.find(".filter-select__list-item:first").addClass("filter-select__list-item_hover"),b.toCenter(c);break;case 40:c.size()?c.next().size()&&(c=c.removeClass("filter-select__list-item_hover").next().addClass("filter-select__list-item_hover")):c=e.size()?e.next().size()?e.next().addClass("filter-select__list-item_hover"):e.addClass("filter-select__list-item_hover"):d.find(".filter-select__list-item:first").addClass("filter-select__list-item_hover"),b.toCenter(c);break;case 13:c.size()&&(c.removeClass("filter-select__list-item_hover"),c.trigger("click"));break;case 27:d.find(".filter-select__opener").trigger("click")}})}();break;case"range":!function(){function a(a,c,e){var f,h;a&&c?(h=a+"-"+c,f=a+" - "+c+" "+b):a?(h=">"+a,f="От "+a+" "+b):c?(f="До "+c+" "+b,h="<"+c):(f=g,h=""),d.trigger({type:"change:filterSelect",value:h,text:f,closeSelect:e})}var b=d.find(".filter-select__currency:first").text(),c=d.find(".filter-select__range-input_from"),e=d.find(".filter-select__range-input_to"),f=d.find(".filter-select__opener"),g=f.text();e.add(c).on("oninput"in window?"input":"keyup",function(){if(this.value.length>12)this.value=this.value.slice(0,12);else{var b=parseInt(this.value);this.value=isNaN(b)?"":b,this.className.indexOf("filter-select__range-input_from")>=0?c.val(this.value):e.val(this.value),a(c.val(),e.val(),!1)}}).change(function(){var b;c.val()&&e.val()&&Number(c.val())>Number(e.val())&&(b=c.val(),c.val(e.val()),e.val(b),a(c.val(),e.val(),!1))}),d.on("change","input.radio",function(){var b,d=$(this);d.prop("checked")&&(this.value.indexOf("-")>=0?(b=this.value.split("-"),c.val(b[0]),e.val(b[1])):(">"==this.value[0]&&(c.val(this.value.slice(1)),e.val("")),"<"==this.value[0]&&(e.val(this.value.slice(1)),c.val(""))),a(c.val(),e.val(),!0))}).on("keydown:filterSelect",function(a){switch(a.keyCode){case 13:case 27:d.find(".filter-select__opener").trigger("click")}})}();break;default:d.on("click",".filter-select__list-item",function(a){var b=$(this);b.addClass("filter-select__list-item_active").siblings().removeClass("filter-select__list-item_active"),d.trigger({type:"change:filterSelect",value:b.attr("data-value"),text:b.text(),closeSelect:!0}),a.preventDefault()}).on("keydown:filterSelect",function(a){var c=d.find(".filter-select__list-item_hover"),e=d.find(".filter-select__list-item_active");switch(a.keyCode){case 38:c.size()?c.prev().size()&&(c=c.removeClass("filter-select__list-item_hover").prev().addClass("filter-select__list-item_hover")):c=e.size()?e.prev().size()?e.prev().addClass("filter-select__list-item_hover"):e.addClass("filter-select__list-item_hover"):d.find(".filter-select__list-item:first").addClass("filter-select__list-item_hover"),b.toCenter(c);break;case 40:c.size()?c.next().size()&&(c=c.removeClass("filter-select__list-item_hover").next().addClass("filter-select__list-item_hover")):c=e.size()?e.next().size()?e.next().addClass("filter-select__list-item_hover"):e.addClass("filter-select__list-item_hover"):d.find(".filter-select__list-item:first").addClass("filter-select__list-item_hover"),b.toCenter(c);break;case 13:c.size()&&(c.removeClass("filter-select__list-item_hover"),c.trigger("click"));break;case 27:d.find(".filter-select__opener").trigger("click")}})}d.removeClass("filter-select_active")}$document=$(document),$(".filter-select").each(function(){$(this);return $(this).find(".filter-select__search").size()?(a.call(this,"search"),!0):$(this).is(".filter-select_range")?(a.call(this,"range"),!0):(a.call(this,"default"),void 0)}).on("change:filterSelect",function(a){a.value?$(this).attr("data-value",a.value).find(".filter-select__opener",this).attr("title",a.text).find("span").text(a.text):$(".filter-select__opener",this).attr("title",a.text).find("span").text(a.text),a.closeSelect&&$(this).removeClass("filter-select_active")}),$document.on("keydown",function(a){[38,40,13,27,32].indexOf(a.keyCode)>=0&&$document.data("activeSelect")&&($document.data("activeSelect").trigger({type:"keydown:filterSelect",keyCode:a.keyCode}),a.preventDefault())}),$document.on("click",".filter-select__opener",function(a){var b=$(this),c=b.closest(".filter-select");c.hasClass("filter-select_active")?($document.data("activeSelect").removeClass("filter-select_active").find(".filter-select__list-item_hover").removeClass("filter-select__list-item_hover"),$.removeData($document,"activeSelect")):($document.data("activeSelect")&&$document.data("activeSelect").removeClass("filter-select_active").find(".filter-select__list-item_hover").removeClass("filter-select__list-item_hover"),$document.data("activeSelect",c.addClass("filter-select_active")),c.find("input:first").focus()),a.preventDefault()}).on("click",function(a){!$(a.target).closest(".filter-select").size()&&$document.data("activeSelect")&&($document.data("activeSelect").removeClass("filter-select_active").find(".filter-select__list-item_hover").removeClass("filter-select__list-item_hover"),$.removeData($document,"activeSelect"))})},ui.initElems.push("filterSelects"),ui.countInput=function(){$(document).on("click",".count-input__more",function(a){var b=$(this).siblings("input");b.val(newCountValue(b.val(),1)),a.preventDefault()}),$(document).on("click",".count-input__less",function(a){var b=$(this).siblings("input");b.val(newCountValue(b.val(),-1)),a.preventDefault()}),$(document).on("change",".count-input input",function(){var a=$(this);a.val(newCountValue(a.val(),0))})},ui.initElems.push("countInput"),ui.visualFix=function(){$("#nav .nav__arrow").each(function(){var a=$(this);a.css({"margin-left":a.parent().width()/2-a.width()/2})})},ui.initElems.push("visualFix");